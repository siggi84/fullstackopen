{"version":3,"sources":["services/phonebook.js","components/phonebook.js","components/personform.js","components/filter.js","components/notification.js","App.js","index.js"],"names":["baseUrl","phonebookService","getAll","axios","get","then","response","data","create","newObject","post","remove","id","delete","update","put","Number","person","onDelete","onClick","name","number","PhoneBook","persons","map","p","PersonForm","setName","setNumber","addPerson","onSubmit","value","onChange","e","target","type","Filter","filter","Notification","message","className","isError","text","App","useState","setPersons","useEffect","setFilter","filteredPersons","toLowerCase","includes","notificationMessage","setNotificationMessage","event","preventDefault","already_exists","x","window","confirm","before","after","k","catch","error","setTimeout","name_object","concat","console","log","alert","resp","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e2181ea0.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst phonebookService = {\n  getAll,\n  create,\n  remove,\n  update\n}\n\nexport default phonebookService;\n","import React from \"react\";\n\nconst Number = ({ person, onDelete }) => {\n  return (\n    <li>\n      <button onClick={onDelete}>delete</button>\n      {person.name} {person.number}\n    </li>\n  );\n};\nconst PhoneBook = ({ persons, onDelete }) => {\n  return (\n    <ul>\n      {persons.map((p) => (\n        <Number key={p.id} person={p} onDelete={() => onDelete(p.id)} />\n      ))}\n    </ul>\n  );\n};\n\nexport default PhoneBook;\n","import React, { useState } from \"react\";\nimport phonebookService from \"../services/phonebook.js\";\n\nconst PersonForm = ({ name, setName, number, setNumber, addPerson}) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name: <input value={name} onChange={(e) => setName(e.target.value)} />\n      </div>\n      <div>\n        number:{\" \"}\n        <input value={number} onChange={(e) => setNumber(e.target.value)} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Filter = ({ filter, onChange }) => {\n  return (\n    <div>\n      filter shown with <input value={filter} onChange={onChange} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  const className= message.isError ? \"error\" : \"notification\"\n  return <div className={className}>{message.text}</div>;\n};\n\nexport default Notification\n","import React, { useState, useEffect} from 'react'\nimport './index.css'\nimport phonebookService from './services/phonebook.js'\nimport PhoneBook from './components/phonebook.js'\nimport PersonForm from './components/personform.js'\nimport Filter from './components/filter.js'\nimport Notification from './components/notification.js'\n\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  useEffect(() => {\n    phonebookService.getAll().then(response => {\n      setPersons(response)\n    })\n\n  }, [])\n\n  const [filter, setFilter] = useState('')\n  const filteredPersons = persons.filter(p => p.name.toLowerCase().includes(filter.toLowerCase()))\n  const [name, setName] = useState(\"\");\n  const [number, setNumber] = useState(\"\");\n  const [notificationMessage, setNotificationMessage] = useState(null)\n\n  const onDelete = (id) => {\n    const name = persons.filter(p => (p.id === id))[0].name\n    const confirmation = window.confirm(`Delete ${name}?`)\n    if (confirmation) {\n      phonebookService\n        .remove(id)\n        .then(resp => setPersons(persons.filter(p => (p.id !== id))))\n        .catch((error) => {\n          setNotificationMessage({ text: `${name} has already been removed from server`, isError: true})\n          setPersons(persons.filter(p => (p.id !== id)))\n          setTimeout(() => {\n            setNotificationMessage(null)\n          }, 5000)\n        })\n    }\n\n    return\n  }\n   \n  const addPerson = (event) => {\n    event.preventDefault();\n    const already_exists = persons.map((x) => x.name).includes(name);\n    if (name === \"\") {\n      alert(`The name field is missing`);\n      return;\n    }\n\n    if (number === \"\") {\n      alert(`The number field is missing`);\n      return;\n    }\n\n    if (already_exists) {\n      window.confirm(\n        `${name} is already added to phonebook, replace the old number with a new one?`\n      );\n      const before = persons.filter((p) => p.name === name)[0];\n      const after = { ...before, number: number };\n      phonebookService\n        .update(before.id, after)\n        .then((p) => {\n          setPersons(persons.map((k) => (k.id === p.id ? p : k)))\n          setNotificationMessage({ text: `Updated ${p.name}`, isError: false})\n        })\n        .catch((error) => {\n          setNotificationMessage({ text: error.response.data.error, isError: true})\n          // setNotificationMessage({ text: `Information of ${name} has already been removed from server`, isError: true})\n          // setPersons(persons.filter(k => (k.id !== before.id)))\n          setTimeout(() => {\n            setNotificationMessage(null)\n          }, 5000)\n        })\n        ;\n\n      return;\n    } else {\n      const name_object = { name: name, number: number };\n      phonebookService.create(name_object).then((response) => {\n        setNotificationMessage({ text: `Added ${name}`, isError: false})\n        setPersons(persons.concat(response));\n        setName(\"\");\n        setNumber(\"\");\n        return response;\n      })\n      .catch(error => {\n        console.log(error.response)\n        setNotificationMessage({ text: error.response.data.error, isError: true})\n      })\n      .then(() => {\n        setTimeout(() => {\n          setNotificationMessage(null)\n        }, 5000)\n        }\n      );\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage} />\n      <Filter value={filter} onChange={e => setFilter(e.target.value)} />\n      <PersonForm name={name} setName={setName} number={number} setNumber={setNumber} addPerson={addPerson} />\n\n      <h2>Numbers</h2>\n      <PhoneBook persons={filteredPersons} onDelete={onDelete}/>\n    </div>\n  )\n}\n\nexport default App\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}